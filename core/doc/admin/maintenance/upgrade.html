<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Upgrading Your ownCloud Server &mdash; ownCloud 8.0 Server Administration Manual 8.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/main.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="ownCloud 8.0 Server Administration Manual 8.0 documentation" href="../contents.html" />
    <link rel="up" title="Maintenance" href="index.html" />
    <link rel="next" title="Upgrading ownCloud with the Updater App" href="update.html" />
    <link rel="prev" title="Backing up ownCloud" href="backup.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#1d2d44">

  </head>
  <body role="document">


<div class="wrap container not-front">
  <div class="content row">
  <main class="main">
    <div class="row page-content-header">
      <div class="col-md-5 col-md-offset-7">
      
        <form class="headersearch" style="margin-bottom:-3px;" action="../search.html" method="get">
        <input type="text" value="" name="q" id="q" class="form-control" /> 
        <button  class="btn btn-default" type="submit" id="searchsubmit">Search</button>
        </form>
      
      </div>
    </div>
    
			<div class="row">
				<div class="col-md-3">
					<div class="sidebar">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>
										
<li><a href="../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">ownCloud 8.0 Server Administration Manual Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">ownCloud 8.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new_admin.html">What&#8217;s New for Admins in ownCloud 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_user/index.html">User Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_files/index.html">File Sharing and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_server/index.html">ownCloud Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_database/index.html">Database Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Maintenance</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="enable_maintenance.html">Maintenance Mode Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup.html">Backing up ownCloud</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Upgrading Your ownCloud Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-quickstart">Upgrade Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encryption-migration-from-oc-7-0-to-8-0">Encryption migration from oC 7.0 to 8.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-with-your-linux-package-manager">Upgrading With Your Linux Package Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-wizard">Upgrade Wizard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-upgrade-procedure">Manual Upgrade Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-across-skipped-releases">Upgrading Across Skipped Releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#previous-owncloud-releases">Previous ownCloud Releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reverse-upgrade">Reverse Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encryption-migration-from-oc-7-0-to-8-0-and-8-0-to-8-1">Encryption migration from oC 7.0 to 8.0 and 8.0 to 8.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debian-migration-to-official-owncloud-packages">Debian Migration to Official ownCloud Packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="update.html">Upgrading ownCloud with the Updater App</a></li>
<li class="toctree-l2"><a class="reference internal" href="restore.html">Restoring ownCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating.html">Migrating to a Different Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operations/index.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos/index.html">ownCloud Videos</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_installation/index.html">Enterprise Edition Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_clients/index.html">Creating Branded ownCloud Clients (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_server_branding/index.html">Enterprise Server Branding (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_external_storage/index.html">External Storage (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_user_management/index.html">User Management (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_files_drop/index.html">Enabling Anonymous Uploads with Files Drop (Enterprise Only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_logging/index.html">Enterprise Logging Apps (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_troubleshooting.html">Enterprise Troubleshooting</a></li>
</ul>

								</ul>
							</div>
					</div>
				</div>
        

				<div class="col-md-9">
					<div class="page-content">
            
<ul class="prevnext-title list-unstyled list-inline">
  <li class="prev">
    <a href="backup.html" title="Previous Chapter: Backing up ownCloud"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Backing up ow...</span>
    </a>
  </li>
  <li class="next">
    <a href="update.html" title="Next Chapter: Upgrading ownCloud with the Updater App"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Upgrading own... &raquo;</span>
    </a>
  </li>
</ul>
						
  <div class="section" id="upgrading-your-owncloud-server">
<h1>Upgrading Your ownCloud Server<a class="headerlink" href="#upgrading-your-owncloud-server" title="Permalink to this headline">¶</a></h1>
<p><strong>Starting with version 8.0.9, ownCloud will be automatically put into
maintenance mode after downloading upgraded packages. You must take it out of
maintenance mode and then run the upgrade wizard to complete the upgrade.</strong></p>
<p>It is best to keep your ownCloud server upgraded regularly, and to install all
point releases and major releases without skipping any of them, as skipping
releases increases the risk of errors. Major releases are 8.0, 8.1, 8.2, and
9.0. Point releases are intermediate releases for each major release. For
example, 8.0.9 and 8.1.3 are point releases. <strong>Skipping major releases is not
supported.</strong></p>
<p>There are multiple ways to keep your ownCloud server upgraded: with the
<a class="reference internal" href="update.html"><em>Updater App</em></a> (Community Edition only), with your Linux package
manager, and by manually upgrading. In this chapter you will learn how to keep
your ownCloud installation current with your Linux package manager, and by
manually upgrading.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Enterprise customers will use their Enterprise software
repositories to install ownCloud packages, rather
than the Open Build Service. Then follow the instructions on this page
for completing upgrades. Please see
<a class="reference internal" href="../enterprise_installation/linux_installation.html"><em>Installing &amp; Upgrading ownCloud Enterprise Edition</em></a> for more information.</p>
</div>
<p>When you are upgrading to a major release, evaluate any third-party apps for
compatibility with the upgrade, and then disable them before upgrading. You may
re-enable them after the upgrade is completed.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>Downgrading is not supported</strong> and risks corrupting your data! If
you want to revert to an older ownCloud version, make a new, fresh
installation and then restore your data from backup. Before doing this,
file a support ticket (if you have paid support) or ask for help in the
ownCloud forums to see if your issue can be resolved without downgrading.</p>
</div>
<div class="section" id="upgrade-quickstart">
<h2>Upgrade Quickstart<a class="headerlink" href="#upgrade-quickstart" title="Permalink to this headline">¶</a></h2>
<p>The best method for keeping ownCloud on Linux servers current is by configuring
your system to use the <a class="reference external" href="http://software.opensuse.org/download.html?project=isv:ownCloud:community&amp;package=owncloud">openSUSE Build Service</a> (see
<a class="reference internal" href="../installation/linux_installation.html"><em>Preferred Linux Installation Method</em></a>); just follow the instructions on oBS
for setting up your package manager. Then stay current by using your Linux
package manager to upgrade fresh packages, and then run a few more steps to
complete the upgrade. These are the basic steps to upgrading ownCloud:</p>
<ul class="simple">
<li><a class="reference internal" href="../installation/apps_management_installation.html"><em>Disable</em></a> all third-party
apps.</li>
<li>Make a <a class="reference internal" href="backup.html"><em>fresh backup</em></a>.</li>
<li>Install new packages from the <a class="reference external" href="http://software.opensuse.org/download.html?project=isv:ownCloud:community&amp;package=owncloud">openSUSE Build Service</a>.</li>
<li>Take your ownCloud server out of <a class="reference internal" href="enable_maintenance.html"><em>maintenance mode</em></a> (ownCloud 8.1.4+).</li>
<li>Run the <a class="reference internal" href="#upgrade-wizard-label"><span>upgrade wizard</span></a> (optionally disabling
the <a class="reference internal" href="#migration-test-label"><span>migration test</span></a>).</li>
<li>Log in and <a class="reference internal" href="../installation/installation_wizard.html#strong-perms-label"><span>apply strong permissions</span></a> to your
ownCloud directories.</li>
<li>Re-enable third-party apps.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are using the Encryption app and upgrading from older
versions of ownCloud to ownCloud 8.0, you must manually migrate your
encryption keys with the <em>occ</em> command after the upgrade is complete, like
this example for CentOS:
<em>sudo -u apache php occ encryption:migrate-keys</em>
You must run <em>occ</em> as your HTTP user. See
<a class="reference internal" href="../configuration_server/occ_command.html"><em>Using the occ Command</em></a> to learn more about <em>occ</em></p>
</div>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>You should always maintain regular backups and make a fresh backup before every
upgrade.</p>
<p>Then review any third-party apps you have installed for compatibility with the
new ownCloud release. Any apps that are not developed by ownCloud show a 3rd
party designation. <strong>Install unsupported apps at your own risk</strong>. Then, before
the upgrade, they must all be disabled. After the upgrade is complete and you
are sure they are compatible with the new ownCloud release you may re-enable
them.</p>
<p><strong>Upgrading is disruptive</strong>. Your ownCloud server will be automatically put
into maintenance mode, so your users will be locked out until the upgrade is
completed. Large installations may take several hours to complete the upgrade.</p>
</div>
<div class="section" id="encryption-migration-from-oc-7-0-to-8-0">
<h2>Encryption migration from oC 7.0 to 8.0<a class="headerlink" href="#encryption-migration-from-oc-7-0-to-8-0" title="Permalink to this headline">¶</a></h2>
<p>The encryption backend was changed between ownCloud 7.0 and 8.0. If you&#8217;re upgrading from
this older version please refer to <a class="reference internal" href="../configuration_files/encryption_configuration.html#upgrading-encryption-label"><span>Encryption migration to ownCloud 8.0</span></a> for the needed migration steps.</p>
</div>
<div class="section" id="upgrading-with-your-linux-package-manager">
<h2>Upgrading With Your Linux Package Manager<a class="headerlink" href="#upgrading-with-your-linux-package-manager" title="Permalink to this headline">¶</a></h2>
<p>When an ownCloud upgrade is available from the <a class="reference external" href="http://software.opensuse.org/download.html?project=isv:ownCloud:community&amp;package=owncloud">openSUSE Build Service</a>
repository, apply it just like any normal Linux upgrade. For example, on Debian
or Ubuntu Linux this is the standard system upgrade command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo apt-get update &amp;&amp; sudo apt-get upgrade
</pre></div>
</div>
<p>Or you can upgrade just ownCloud with this command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo apt-get update &amp;&amp; sudo apt-get install owncloud
</pre></div>
</div>
<p>On Fedora, CentOS, and Red Hat Linux use <code class="docutils literal"><span class="pre">yum</span></code> to see all available updates:</p>
<div class="highlight-python"><div class="highlight"><pre>$ yum check-update
</pre></div>
</div>
<p>You can apply all available updates with this command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo yum update
</pre></div>
</div>
<p>Or update only ownCloud:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo yum update owncloud
</pre></div>
</div>
<p>Your Linux package manager only downloads the current ownCloud packages. Then
your ownCloud server is automatically put into maintenance mode.</p>
<div class="figure" id="id3">
<a class="reference internal image-reference" href="../_images/upgrade-1.png"><img alt="ownCloud status screen informing users that it is in maintenance mode." src="../_images/upgrade-1.png" style="width: 287.7px; height: 323.4px;" /></a>
<p class="caption"><span class="caption-text"><em>Click to enlarge</em></span></p>
</div>
<p>Next, take your server out of maintenance mode. You can do this by changing
<code class="docutils literal"><span class="pre">'maintenance'</span> <span class="pre">=&gt;</span> <span class="pre">true,</span></code> to <code class="docutils literal"><span class="pre">'maintenance'</span> <span class="pre">=&gt;</span> <span class="pre">false,</span></code> in <code class="docutils literal"><span class="pre">config.php</span></code>, or
use the <a class="reference internal" href="../configuration_server/occ_command.html"><em>occ command</em></a>, like this
example on Ubuntu:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ maintenance:mode --off
</pre></div>
</div>
</div>
<div class="section" id="upgrade-wizard">
<span id="upgrade-wizard-label"></span><h2>Upgrade Wizard<a class="headerlink" href="#upgrade-wizard" title="Permalink to this headline">¶</a></h2>
<p>The final step is to run the upgrade wizard to perform the final steps of
updating your apps and database. You will see a screen with a summary of apps
that are updated, and a <strong>Start Update</strong> button. If you have shell access it
is better to <strong>not</strong> click the Start Update button, but rather to use <code class="docutils literal"><span class="pre">occ</span>
<span class="pre">upgrade</span></code>, like this example on CentOS:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u apache php occ upgrade
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">occ</span> <span class="pre">upgrade</span></code> is more reliable, especially on installations with large
datasets and large numbers of users because it avoids the risk of PHP timeouts.</p>
<p>When the upgrade is completed you will be returned to the login screen.</p>
<div class="section" id="migration-test">
<span id="migration-test-label"></span><h3>Migration Test<a class="headerlink" href="#migration-test" title="Permalink to this headline">¶</a></h3>
<p>Before completing the upgrade, ownCloud first runs a simulation by copying all
database tables to a temporary directory and then performing the upgrade on
them, to ensure that the upgrade will complete correctly. This can delay large
installations by several hours, so you can omit this step with the
<code class="docutils literal"><span class="pre">--skip-migration-test</span></code> option, like this example on CentOS:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u apache php occ upgrade --skip-migration-test
</pre></div>
</div>
</div>
<div class="section" id="setting-strong-permissions">
<h3>Setting Strong Permissions<a class="headerlink" href="#setting-strong-permissions" title="Permalink to this headline">¶</a></h3>
<p>After upgrading, verify that your ownCloud directory permissions are set
according to <a class="reference internal" href="../installation/installation_wizard.html#strong-perms-label"><span>Setting Strong Directory Permissions</span></a>.</p>
<p>If the upgrade fails, then you must try a manual upgrade.</p>
</div>
</div>
<div class="section" id="manual-upgrade-procedure">
<span id="manual-upgrade-label"></span><h2>Manual Upgrade Procedure<a class="headerlink" href="#manual-upgrade-procedure" title="Permalink to this headline">¶</a></h2>
<p>Always start by making a fresh backup.</p>
<p>If you are upgrading to a major release, for example from 8.1.3 to
8.2, you must review all third party applications (not core apps) for
compatibility with your new ownCloud version. Then disable all of them
before starting the upgrade.</p>
<p>Next put your server in maintenance mode. This prevents new logins, locks the
sessions of logged-in users, and displays a status screen so users know what is
happening. There are two ways to do this, and the preferred method is to use the
<a class="reference internal" href="../configuration_server/occ_command.html"><em>occ command</em></a>, which you must run as
your HTTP user. This example is for Ubuntu Linux:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ maintenance:mode --on
</pre></div>
</div>
<p>The other way is by entering your <code class="docutils literal"><span class="pre">config.php</span></code> file and changing
<code class="docutils literal"><span class="pre">'maintenance'</span> <span class="pre">=&gt;</span> <span class="pre">false,</span></code> to <code class="docutils literal"><span class="pre">'maintenance'</span> <span class="pre">=&gt;</span> <span class="pre">true,</span></code>.</p>
<ol class="arabic simple">
<li>Back up your existing ownCloud Server database, data directory, and
<code class="docutils literal"><span class="pre">config.php</span></code> file. (See <a class="reference internal" href="backup.html"><em>Backing up ownCloud</em></a>.)</li>
<li>Download and unpack the latest ownCloud Server release (Archive file) from
<a class="reference external" href="https://owncloud.org/install/">owncloud.org/install/</a> into an empty directory outside
of your current installation. For example, if your current ownCloud is
installed in <code class="docutils literal"><span class="pre">/var/www/owncloud/</span></code> you could create a new directory called
<code class="docutils literal"><span class="pre">/var/www/owncloud2/</span></code></li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To unpack your new tarball::
tar xjf owncloud-latest.tar.bz2</p>
</div>
<ol class="arabic simple" start="3">
<li>Stop your Web server.</li>
<li>Rename or move your current ownCloud directory (named <code class="docutils literal"><span class="pre">owncloud/</span></code> if
installed using defaults) to another location.</li>
<li>This creates a new <code class="docutils literal"><span class="pre">owncloud/</span></code> directory populated with your new server
files. Copy this directory and its contents to the original location of your
old server, for example <code class="docutils literal"><span class="pre">/var/www/</span></code>, so that once again you have
<code class="docutils literal"><span class="pre">/var/www/owncloud</span></code> .</li>
<li>Copy and paste the <code class="docutils literal"><span class="pre">config.php</span></code> file from your old version of
ownCloud to your new ownCloud version.</li>
<li>If you keep your <code class="docutils literal"><span class="pre">data/</span></code> directory in your <code class="docutils literal"><span class="pre">owncloud/</span></code> directory, copy
it from your old version of ownCloud to the <code class="docutils literal"><span class="pre">owncloud/</span></code> directory of
your new ownCloud version. If you keep it outside of <code class="docutils literal"><span class="pre">owncloud/</span></code> then
you don&#8217;t have to do anything with it, because its location is configured in
your original <code class="docutils literal"><span class="pre">config.php</span></code>, and none of the upgrade steps touch it.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend storing your <code class="docutils literal"><span class="pre">data/</span></code> directory in a location other
than your <code class="docutils literal"><span class="pre">owncloud/</span></code> directory.</p>
</div>
<ol class="arabic" start="8">
<li><p class="first">Restart your Web server.</p>
</li>
<li><dl class="first docutils">
<dt>Now you should be able to open a Web browser to your ownCloud server and</dt>
<dd><p class="first">log in as usual. You have a couple more steps to go: You should see a
<strong>Start Update</strong> screen, just like in the <strong>Upgrading With Your Linux
Package Manager</strong> section, above. Review the prerequisites, and if you have
followed all the steps click the <strong>Start Update</strong> button.</p>
<p>If you are running a large installation with a lot of files and users,
you should launch the upgrade from the command  line using <code class="docutils literal"><span class="pre">occ</span></code> to
avoid PHP timeouts, like this example on Ubuntu Linux:</p>
<div class="last highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ upgrade
</pre></div>
</div>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">occ</span></code> command does not download ownCloud updates. You must
first download and install the updated code (steps 1-3), and then
<code class="docutils literal"><span class="pre">occ</span></code> performs the final upgrade steps.</p>
</div>
</li>
<li><p class="first">The upgrade operation takes a few minutes to a few hours, depending on the
size of your installation. When it is finished you will see a success
message, or an error message that will tell where it went wrong.</p>
</li>
</ol>
<p>Assuming your upgrade succeeded, take a look at the bottom of your Admin page to
verify the version number. Check your other settings to make sure they&#8217;re
correct. Go to the Apps page and review the core apps to make sure the right
ones are enabled. Re-enable your third-party apps. Then apply strong
permissions to your ownCloud directories (<a class="reference internal" href="../installation/installation_wizard.html#strong-perms-label"><span>Setting Strong Directory Permissions</span></a>).</p>
</div>
<div class="section" id="upgrading-across-skipped-releases">
<span id="skipped-release-upgrade-label"></span><h2>Upgrading Across Skipped Releases<a class="headerlink" href="#upgrading-across-skipped-releases" title="Permalink to this headline">¶</a></h2>
<p>It is best to update your ownCloud installation with every new point release,
and to never skip any major releases. If you have skipped any major releases
you
can bring your ownCloud current with these steps:</p>
<ol class="arabic simple">
<li>Add the repository of your current version</li>
<li>Upgrade your current version to the latest point release</li>
<li>Add the repo of the next major release</li>
<li>Upgrade your current version to the next major release</li>
<li>Run upgrade routine</li>
<li>Repeat from step 3 until you reach the last available major release</li>
</ol>
<p>You&#8217;ll find previous ownCloud releases in the <a class="reference external" href="https://owncloud.org/changelog/">ownCloud Server Changelog</a>.</p>
<p>If upgrading via your package manager fails, then you must perform a
<a class="reference internal" href="#manual-upgrade-label"><span>Manual Upgrade Procedure</span></a>.</p>
</div>
<div class="section" id="previous-owncloud-releases">
<h2>Previous ownCloud Releases<a class="headerlink" href="#previous-owncloud-releases" title="Permalink to this headline">¶</a></h2>
<p>You&#8217;ll find previous ownCloud releases in the <a class="reference external" href="https://owncloud.org/changelog/">ownCloud Server Changelog</a>.</p>
</div>
<div class="section" id="reverse-upgrade">
<h2>Reverse Upgrade<a class="headerlink" href="#reverse-upgrade" title="Permalink to this headline">¶</a></h2>
<p>If you need to reverse your upgrade, see <a class="reference internal" href="restore.html"><em>Restoring ownCloud</em></a>.</p>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>When upgrading ownCloud and you are running MySQL or MariaDB with binary logging
enabled, your upgrade may fail with these errors in your MySQL/MariaDB log:</p>
<div class="highlight-python"><div class="highlight"><pre>An unhandled exception has been thrown:
exception &#39;PDOException&#39; with message &#39;SQLSTATE[HY000]: General error: 1665
Cannot execute statement: impossible to write to binary log since
BINLOG_FORMAT = STATEMENT and at least one table uses a storage engine limited
to row-based logging. InnoDB is limited to row-logging when transaction
isolation level is READ COMMITTED or READ UNCOMMITTED.&#39;
</pre></div>
</div>
<p>Please refer to <a class="reference internal" href="../configuration_database/linux_database_configuration.html#db-binlog-label"><span>MySQL / MariaDB with Binary Logging Enabled</span></a> on how to correctly configure your environment.</p>
<p>Occasionally, <em>files do not show up after a upgrade</em>. A rescan of the files can help:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php console.php files:scan --all
</pre></div>
</div>
<p>See <a class="reference external" href="http://owncloud.org/support">the owncloud.org support page</a> for further
resources for both home and enterprise users.</p>
<p>Sometimes, ownCloud can get <em>stuck in a upgrade</em>. This is usually due to the
process taking too long and encountering a PHP time-out. Stop the upgrade
process this way:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ maintenance:mode --off
</pre></div>
</div>
<p>Then start the manual process:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ upgrade
</pre></div>
</div>
<p>If this does not work properly, try the repair function:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ maintenance:repair
</pre></div>
</div>
</div>
<div class="section" id="encryption-migration-from-oc-7-0-to-8-0-and-8-0-to-8-1">
<h2>Encryption migration from oC 7.0 to 8.0 and 8.0 to 8.1<a class="headerlink" href="#encryption-migration-from-oc-7-0-to-8-0-and-8-0-to-8-1" title="Permalink to this headline">¶</a></h2>
<p>The encryption backend was changed twice between ownCloud 7.0 and 8.0 as well as
between 8.0 and 8.1. If you&#8217;re upgrading from these older versions please refer
to
<a class="reference internal" href="../configuration_files/encryption_configuration.html#upgrading-encryption-label"><span>Encryption migration to ownCloud 8.0</span></a> for the needed migration steps.</p>
</div>
<div class="section" id="debian-migration-to-official-owncloud-packages">
<h2>Debian Migration to Official ownCloud Packages<a class="headerlink" href="#debian-migration-to-official-owncloud-packages" title="Permalink to this headline">¶</a></h2>
<p>As of March 2016 Debian will not include ownCloud packages. Debian users can
migrate to the official ownCloud packages by following this guide,
<a class="reference external" href="https://owncloud.org/blog/upgrading-owncloud-on-debian-stable-to-official-packages/">Upgrading ownCloud on Debian Stable to official packages</a>.</p>
</div>
</div>


            
<ul class="prevnext-title list-unstyled list-inline">
  <li class="prev">
    <a href="backup.html" title="Previous Chapter: Backing up ownCloud"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Backing up ow...</span>
    </a>
  </li>
  <li class="next">
    <a href="update.html" title="Next Chapter: Upgrading ownCloud with the Updater App"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Upgrading own... &raquo;</span>
    </a>
  </li>
</ul>
					</div>
				</div>
			</div>
  </main>  
  </div>
</div>
  </body>
</html>