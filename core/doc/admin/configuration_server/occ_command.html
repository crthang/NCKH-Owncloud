<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using the occ Command &mdash; ownCloud 8.0 Server Administration Manual 8.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/main.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="ownCloud 8.0 Server Administration Manual 8.0 documentation" href="../contents.html" />
    <link rel="up" title="ownCloud Server Configuration" href="index.html" />
    <link rel="next" title="Configuring the Activity App" href="activity_configuration.html" />
    <link rel="prev" title="ownCloud Server Configuration" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#1d2d44">

  </head>
  <body role="document">


<div class="wrap container not-front">
  <div class="content row">
  <main class="main">
    <div class="row page-content-header">
      <div class="col-md-5 col-md-offset-7">
      
        <form class="headersearch" style="margin-bottom:-3px;" action="../search.html" method="get">
        <input type="text" value="" name="q" id="q" class="form-control" /> 
        <button  class="btn btn-default" type="submit" id="searchsubmit">Search</button>
        </form>
      
      </div>
    </div>
    
			<div class="row">
				<div class="col-md-3">
					<div class="sidebar">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>
										
<li><a href="../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">ownCloud 8.0 Server Administration Manual Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">ownCloud 8.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new_admin.html">What&#8217;s New for Admins in ownCloud 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_user/index.html">User Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_files/index.html">File Sharing and Management</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ownCloud Server Configuration</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Using the occ Command</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#apps-commands">Apps Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database-conversion">Database Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encryption">Encryption</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-operations">File Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#l10n-create-javascript-translation-files-for-apps">l10n, Create javascript Translation Files for Apps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ldap-commands">LDAP Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#maintenance-commands">Maintenance Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-commands">User Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-command">Upgrade Command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="activity_configuration.html">Configuring the Activity App</a></li>
<li class="toctree-l2"><a class="reference internal" href="antivirus_configuration.html">Configuring the ClamAV Antivirus Scanner</a></li>
<li class="toctree-l2"><a class="reference internal" href="automatic_configuration.html">Automatic Configuration Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="background_jobs_configuration.html">Defining Background Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching_configuration.html">Configuring Memory Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_sample_php_parameters.html">Config.php Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_client_repos.html">Custom Client Download Repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_configuration.html">Email Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="external_sites.html">Linking External Sites</a></li>
<li class="toctree-l2"><a class="reference internal" href="js_css_asset_management_configuration.html">JavaScript and CSS Asset Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="knowledgebase_configuration.html">Knowledge Base Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="language_configuration.html">Language Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging_configuration.html">Logging Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="harden_server.html">Hardening and Security Guidance</a></li>
<li class="toctree-l2"><a class="reference internal" href="reverse_proxy_configuration.html">Reverse Proxy Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="search_configuration.html">Enabling Full-Text Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="security_setup_warnings.html">Warnings on Admin Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="thirdparty_php_configuration.html">Using Third Party PHP Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance_tuning.html">Server Tuning &amp; Performance Tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_database/index.html">Database Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/index.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos/index.html">ownCloud Videos</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_installation/index.html">Enterprise Edition Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_clients/index.html">Creating Branded ownCloud Clients (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_server_branding/index.html">Enterprise Server Branding (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_external_storage/index.html">External Storage (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_user_management/index.html">User Management (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_files_drop/index.html">Enabling Anonymous Uploads with Files Drop (Enterprise Only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_logging/index.html">Enterprise Logging Apps (Enterprise only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_troubleshooting.html">Enterprise Troubleshooting</a></li>
</ul>

								</ul>
							</div>
					</div>
				</div>
        

				<div class="col-md-9">
					<div class="page-content">
            
<ul class="prevnext-title list-unstyled list-inline">
  <li class="prev">
    <a href="index.html" title="Previous Chapter: ownCloud Server Configuration"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; ownCloud Serv...</span>
    </a>
  </li>
  <li class="next">
    <a href="activity_configuration.html" title="Next Chapter: Configuring the Activity App"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Configuring t... &raquo;</span>
    </a>
  </li>
</ul>
						
  <div class="section" id="using-the-occ-command">
<h1>Using the occ Command<a class="headerlink" href="#using-the-occ-command" title="Permalink to this headline">¶</a></h1>
<p>ownCloud&#8217;s <code class="docutils literal"><span class="pre">occ</span></code> command (ownCloud console) is ownCloud&#8217;s command-line
interface. You can perform many common server operations with <code class="docutils literal"><span class="pre">occ</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>* Manage apps
* Manage users
* Convert the ownCloud database
* Reset passwords, including administrator passwords
* Convert the ownCloud database from SQLite to a more performant DB
* Query and change LDAP settings
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">occ</span></code> is in the <code class="file docutils literal"><span class="pre">owncloud/</span></code> directory; for example
<code class="file docutils literal"><span class="pre">/var/www/owncloud</span></code> on Ubuntu Linux. <code class="docutils literal"><span class="pre">occ</span></code> is a PHP script. You must
run
it as your HTTP user to ensure that the correct permissions are maintained on
your ownCloud files and directories.</p>
<p>The HTTP user is different on the various Linux distributions. See the
<strong>Setting
Strong Directory Permissions</strong> section of
<a class="reference internal" href="../installation/installation_wizard.html"><em>Installation Wizard</em></a> to learn how to find your HTTP user.</p>
<ul class="simple">
<li>The HTTP user and group in Debian/Ubuntu is <code class="docutils literal"><span class="pre">www-data</span></code>.</li>
<li>The HTTP user and group in Fedora/CentOS is <code class="docutils literal"><span class="pre">apache</span></code>.</li>
<li>The HTTP user and group in Arch Linux is <code class="docutils literal"><span class="pre">http</span></code>.</li>
<li>The HTTP user in openSUSE is <code class="docutils literal"><span class="pre">wwwrun</span></code>, and the HTTP group is <code class="docutils literal"><span class="pre">www</span></code>.</li>
</ul>
<p>Running it with no options lists all commands and options, like this example on
Ubuntu:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ
ownCloud version 8.0.3
Usage:
 [options] command [arguments]

Options:
 --help (-h)           Display this help message
 --quiet (-q)          Do not output any message
 --verbose (-v|vv|vvv) Increase the verbosity of messages: 1 for normal
                       output, 2 for more verbose output and 3 for debug
 --version (-V)        Display this application version
 --ansi                Force ANSI output
 --no-ansi             Disable ANSI output
 --no-interaction (-n) Do not ask any interactive question

Available commands:
 check                       check dependencies of the server environment
 help                        Displays help for a command
 list                        Lists commands
 status                      show some status information
 upgrade                     run upgrade routines after installation of a new
                             release. The release has to be installed before.
</pre></div>
</div>
<p>This is the same as <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">www-data</span> <span class="pre">php</span> <span class="pre">occ</span> <span class="pre">list</span></code>.</p>
<p>Run it with the <code class="docutils literal"><span class="pre">-h</span></code> option for syntax help:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ -h
</pre></div>
</div>
<p>Display your ownCloud version:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ -V
  ownCloud version 8.0.3
</pre></div>
</div>
<p>Query your ownCloud server status:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ status
  - installed: true
  - version: 8.0.3.4
  - versionstring: 8.0.3
  - edition: Enterprise
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">occ</span></code> has options, commands, and arguments. Options and arguments are
optional, while commands are required. The syntax is:</p>
<div class="highlight-python"><div class="highlight"><pre>occ [options] command [arguments]
</pre></div>
</div>
<p>Get detailed information on individual commands with the <code class="docutils literal"><span class="pre">help</span></code> command, like
this example for the <code class="docutils literal"><span class="pre">maintenance:mode</span></code> command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ help maintenance:mode
  Usage:
  maintenance:mode [--on] [--off]

  Options:
  --on                  enable maintenance mode
  --off                 disable maintenance mode
  --help (-h)           Display this help message.
  --quiet (-q)          Do not output any message.
  --verbose (-v|vv|vvv) Increase the verbosity of messages: 1 for normal
  output, 2 for more verbose output and 3 for debug
  --version (-V)        Display this application version.
  --ansi                Force ANSI output.
  --no-ansi             Disable ANSI output.
  --no-interaction (-n) Do not ask any interactive question.
</pre></div>
</div>
<div class="section" id="apps-commands">
<span id="apps-commands-label"></span><h2>Apps Commands<a class="headerlink" href="#apps-commands" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">app</span></code> commands list, enable, and disable apps. This lists all of your
installed apps, and shows whether they are enabled or disabled:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ app:list
</pre></div>
</div>
<p>Enable an app:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ app:enable external
  external enabled
</pre></div>
</div>
<p>Disable an app:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ app:disable external
  external disabled
</pre></div>
</div>
</div>
<div class="section" id="database-conversion">
<h2>Database Conversion<a class="headerlink" href="#database-conversion" title="Permalink to this headline">¶</a></h2>
<p>The SQLite database is good for testing, and for ownCloud servers with small
workloads, but production servers with multiple users should use MariaDB,
MySQL,
or PostgreSQL. You can use <code class="docutils literal"><span class="pre">occ</span></code> to convert from SQLite to one of these other
databases. You need:</p>
<ul class="simple">
<li>Your desired database and its PHP connector installed</li>
<li>The login and password of a database admin user</li>
<li>The database port number, if it is a non-standard port</li>
</ul>
<p>This is example converts to SQLite MySQL/MariaDB:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ db:convert-type mysql oc_dbuser 127.0.0.1
oc_database
</pre></div>
</div>
<p>For a more detailed explanation see
<a class="reference internal" href="../configuration_database/db_conversion.html"><em>Converting Database Type</em></a></p>
</div>
<div class="section" id="encryption">
<h2>Encryption<a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h2>
<p>When you are using encryption, you must manually migrate your encryption
keys after upgrading your ownCloud server:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ encryption:migrate-keys
</pre></div>
</div>
</div>
<div class="section" id="file-operations">
<h2>File Operations<a class="headerlink" href="#file-operations" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">files:scan</span></code> command scans for new files and updates the file cache. You
may rescan all files, per-user, a space-delimited list of users, and limit the
search path:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ  files:scan --help
  Usage:
  files:scan [-p|--path=&quot;...&quot;] [-q|--quiet] [--all] [user_id1] ... [user_idN]

Arguments:
  user_id               will rescan all files of the given user(s)

Options:
  --path (-p)           limit rescan to this path, eg.
  --path=&quot;/alice/files/Music&quot;, the user_id is determined by the path and the
  user_id parameter and --all are ignored
  --all                 will rescan all files of all known users
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">files:cleanup</span></code> tidies up the server&#8217;s file cache by deleting all file
entries that have no matching entries in the storage table.</p>
</div>
<div class="section" id="l10n-create-javascript-translation-files-for-apps">
<h2>l10n, Create javascript Translation Files for Apps<a class="headerlink" href="#l10n-create-javascript-translation-files-for-apps" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal"><span class="pre">l10n:createjs</span></code> to translate apps into various languages, using this
syntax:</p>
<div class="highlight-python"><div class="highlight"><pre>l10n:createjs appname language_name
</pre></div>
</div>
<p>This example converts the Activity app to Bosnian:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ l10n:createjs activity bs
</pre></div>
</div>
<p>These are the supported language codes, and <a class="reference external" href="http://www.loc.gov/standards/iso639-2/php/code_list.php">Codes for the Representation of
Names of Languages</a> may be helpful:</p>
<div class="highlight-python"><div class="highlight"><pre>ach                     gu     ml     sr
ady          eo         he     ml_IN  sr@latin
af_ZA        es         hi     mn     su
ak           es_AR      hi_IN  ms_MY  sv
am_ET        es_BO      hr     mt_MT  sw_KE
ar           es_CL      hu_HU  my_MM  ta_IN
ast          es_CO      hy     nb_NO  ta_LK
az           es_CR      ia     nds    te
be           es_EC      id     ne     tg_TJ
bg_BG        es_MX      io     nl     th_TH
bn_BD        es_PE      is     nn_NO  tl_PH
bn_IN        es_PY      it     nqo    tr
bs           es_US      ja     oc     tzm
ca           es_UY      jv     or_IN  ug
ca@valencia  et_EE      ka_GE  pa     uk
cs_CZ        eu         km     pl     ur
cy_GB        eu_ES      kn     pt_BR  ur_PK
da           fa         ko     pt_PT  uz
de           fi         ku_IQ  ro     vi
de_AT        fi_FI      lb     ru     yo
de_CH        fil        lo     si_LK  zh_CN
de_DE        fr         lt_LT  sk     zh_HK
el           fr_CA      lv     sk_SK  zh_TW
en_GB        fy_NL      mg     sl
en_NZ        gl         mk     sq
</pre></div>
</div>
</div>
<div class="section" id="ldap-commands">
<h2>LDAP Commands<a class="headerlink" href="#ldap-commands" title="Permalink to this headline">¶</a></h2>
<p>You can run the following LDAP commands with <code class="docutils literal"><span class="pre">occ</span></code>.</p>
<p>Search for an LDAP user, using this syntax:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:search [--group] [--offset=&quot;...&quot;]
[--limit=&quot;...&quot;] search
</pre></div>
</div>
<p>This example searches for usernames that start with &#8220;rob&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:search rob
</pre></div>
</div>
<p>Check if an LDAP user exists. This works only if the ownCloud server is
connected to an LDAP server:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:check-user robert
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">ldap:check-user</span></code> will not run a check when it finds a disabled LDAP connection. This prevents users that exist on disabled LDAP connections from being marked as deleted. If you know for certain that the user you are searching for is not in one of the disabled connections, and exists on an active connection, use the <code class="docutils literal"><span class="pre">--force</span></code> option to force it to check all active LDAP connections:</p>
<blockquote>
<div>$ sudo -u www-data php occ <a class="reference external" href="ldap:check-user">ldap:check-user</a> &#8211;force robert</div></blockquote>
<p><code class="docutils literal"><span class="pre">ldap:create-empty-config</span></code> creates an empty LDAP configuration. The first
one you create has no <code class="docutils literal"><span class="pre">configID</span></code>, like this example:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:create-empty-config
  Created new configuration with configID &#39;&#39;
</pre></div>
</div>
<p>This is a holdover from the early days, when there was no option to create
additional configurations. The second, and all subsequent, configurations
that you create are automatically assigned IDs:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:create-empty-config
   Created new configuration with configID &#39;s01&#39;
</pre></div>
</div>
<p>Then you can list and view your configurations:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:show-config
</pre></div>
</div>
<p>And view the configuration for a single configID:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:show-config s01
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">ldap:delete-config</span> <span class="pre">[configID]</span></code> deletes an existing LDAP configuration:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:delete  s01
 Deleted configuration with configID &#39;s01&#39;
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ldap:set-config</span></code> command is for manipulating configurations, like this
example that sets search attributes:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ ldap:set-config s01 ldapAttributesForUserSearch
&quot;cn;givenname;sn;displayname;mail&quot;
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">ldap:show-remnants</span></code> is for cleaning up the LDAP mappings table, and is
documented in <a class="reference internal" href="../configuration_user/user_auth_ldap_cleanup.html"><em>LDAP User Cleanup</em></a>.</p>
</div>
<div class="section" id="maintenance-commands">
<h2>Maintenance Commands<a class="headerlink" href="#maintenance-commands" title="Permalink to this headline">¶</a></h2>
<p>These maintenance commands put your ownCloud server into
maintenance and single-user mode, and run repair steps during updates.</p>
<p>You must put your ownCloud server into maintenance mode whenever you perform an
update or upgrade. This locks the sessions of all logged-in users, including
administrators, and displays a status screen warning that the server is in
maintenance mode. Users who are not already logged in cannot log in until
maintenance mode is turned off. When you take the server out of maintenance
mode
logged-in users must refresh their Web browsers to continue working:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ maintenance:mode --on
$ sudo -u www-data php occ maintenance:mode --off
</pre></div>
</div>
<p>Putting your ownCloud server into single-user mode allows admins to log in and
work, but not ordinary users. This is useful for performing maintenance and
troubleshooting on a running server:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ maintenance:singleuser --on
  Single user mode enabled
</pre></div>
</div>
<p>And turn it off when you&#8217;re finished:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ maintenance:singleuser --off
  Single user mode disabled
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">maintenance:repair</span></code> command runs automatically during upgrades to clean
up the database, so while you can run it manually there usually isn&#8217;t a need
to:</p>
<div class="highlight-python"><div class="highlight"><pre> $ sudo -u www-data php occ maintenance:repair
    - Repair mime types
- Repair legacy storages
- Repair config
- Clear asset cache after upgrade
    - Asset pipeline disabled -&gt; nothing to do
- Generate ETags for file where no ETag is present.
    - ETags have been fixed for 0 files/folders.
- Clean tags and favorites
    - 0 tags for delete files have been removed.
    - 0 tag entries for deleted tags have been removed.
    - 0 tags with no entries have been removed.
- Re-enable file app
</pre></div>
</div>
</div>
<div class="section" id="user-commands">
<h2>User Commands<a class="headerlink" href="#user-commands" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">user</span></code> commands remove users, reset passwords, display a
simple
report showing how many users you have, and when a user was last logged in.</p>
<p>You can reset any user&#8217;s password, including administrators (see
<a class="reference internal" href="../configuration_user/reset_admin_password.html"><em>Resetting a Lost Admin Password</em></a>):</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ user:resetpassword layla
  Enter a new password:
  Confirm the new password:
  Successfully reset password for layla
</pre></div>
</div>
<p>You can delete users:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ user:delete fred
</pre></div>
</div>
<p>View a user&#8217;s most recent login:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ user:lastseen layla
  layla&#39;s last login: 09.01.2015 18:46
</pre></div>
</div>
<p>Generate a simple report that counts all users, including users on external user
authentication servers such as LDAP:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ user:report
+------------------+----+
| User Report      |    |
+------------------+----+
| Database         | 12 |
| LDAP             | 86 |
|                  |    |
| total users      | 98 |
|                  |    |
| user directories | 2  |
+------------------+----+
</pre></div>
</div>
</div>
<div class="section" id="upgrade-command">
<h2>Upgrade Command<a class="headerlink" href="#upgrade-command" title="Permalink to this headline">¶</a></h2>
<p>When you are performing an update or upgrade on your ownCloud server (see the
Maintenance section of this manual), it is better to use <code class="docutils literal"><span class="pre">occ</span></code> to perform the
database upgrade step, rather than the Web GUI, in order to avoid timeouts. PHP
scripts invoked from the Web interface are limited to 3600 seconds. In larger
environments this may not be enough, leaving the system in an inconsistent
state. After performing all the preliminary steps (see
<a class="reference internal" href="../maintenance/upgrade.html"><em>Upgrading Your ownCloud Server</em></a>) use this command to upgrade your databases:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ upgrade
</pre></div>
</div>
<p>Before completing the upgrade, ownCloud first runs a simulation by copying all
database tables to new tables, and then performs the upgrade on them, to ensure
that the upgrade will complete correctly. The copied tables are deleted after
the upgrade. This takes twice as much time, which on large installations can be
many hours, so you can omit this step with the <code class="docutils literal"><span class="pre">--skip-migration-test</span></code>
option:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ upgrade --skip-migration-test
</pre></div>
</div>
<p>You can perform this simulation manually with the <code class="docutils literal"><span class="pre">--dry-run</span></code> option:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo -u www-data php occ upgrade --dry-run
</pre></div>
</div>
</div>
</div>


            
<ul class="prevnext-title list-unstyled list-inline">
  <li class="prev">
    <a href="index.html" title="Previous Chapter: ownCloud Server Configuration"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; ownCloud Serv...</span>
    </a>
  </li>
  <li class="next">
    <a href="activity_configuration.html" title="Next Chapter: Configuring the Activity App"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Configuring t... &raquo;</span>
    </a>
  </li>
</ul>
					</div>
				</div>
			</div>
  </main>  
  </div>
</div>
  </body>
</html>